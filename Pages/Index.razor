@page "/"

@using Data

<h1>Battleships</h1>

@code{

	Data.Board playerBoard = new Data.Board();
	Data.Board enemyBoard = new Data.Board();



	protected override void OnInitialized(){
		enemyBoard.RandomlyInitialize();
	}

	void Shoot(int i, int j){
		enemyBoard.Shoot(i, j);
	}

	string GetCellClass(SeaFieldState fieldState){
		return fieldState switch
		{
			SeaFieldState.Ship => "ship",
			SeaFieldState.Hit => "hit",
			SeaFieldState.Unknown => "unknown",
			SeaFieldState.Empty => "empty",
			_ => ""
		};
	}


}


<div class="header"></div>
@for (int j = 0; j < 10; j++){
		<div class="header">@(j+1)</div>
}
@for (int i = 0; i < 10; i++)
{
	int localI = i;
	<div class="row"> <div class="header">@(i+1)</div>
	@for (int j = 0; j < 10; j++)
	{
		int localJ = j;
		<div @onclick="() => Shoot(localI,localJ)" class="cell @(GetCellClass(enemyBoard.GetFoWField(i,j)))"></div>
	}
	</div>
}


<div class="header"></div>
@for (int j = 0; j < 10; j++)
{
	<div class="header">@(j + 1)</div>
}
@for (int i = 0; i < 10; i++)
{
	<div class="row">
		<div class="header">@(i + 1)</div>
		@for (int j = 0; j < 10; j++)
		{
			<div class="cell @(GetCellClass(enemyBoard.GetField(i,j)))"></div>
		}
	</div>
}